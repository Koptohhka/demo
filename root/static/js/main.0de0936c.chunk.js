(this["webpackJsonpchesstery-graph-lib-chess"]=this["webpackJsonpchesstery-graph-lib-chess"]||[]).push([[0],{18:function(t,e,c){},25:function(t,e,c){},26:function(t,e,c){"use strict";c.r(e);var n=c(2),a=c(0),r=c.n(a),i=c(7),o=c.n(i),s=(c(18),c(5)),u=c(3),l=(c(25),{wS:!0,bS:!0,K:!0,Q:!0,R:!0,B:!0,N:!0,P:!0,k:!0,q:!0,r:!0,b:!0,n:!0,p:!0}),d=c(4),b=c(1),f="chessboardReducer/SET_FUGRES_DATA",h={figuresData:null},j=function(t){return{type:f,payload:t}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return Object(b.a)(Object(b.a)({},t),{},{figuresData:e.payload});default:return t}},O=function(t,e,c){var n=null,a=[],r=[];return function i(){if(n=document.elementFromPoint(t,e))return n.dataset[c]||"HTML"===n.tagName?(0!==a.length&&a.forEach((function(t,e){return t.style.display=r[e]})),n):(r.push(n.style.display),n.style.display="none",a.push(n),i())}()},g=function(t){var e=t.children,c=Object(u.c)((function(t){return t.chessboardReducer})).figuresData,r=Object(u.b)(),i=Object(a.useState)(null),o=Object(s.a)(i,2),l=o[0],f=o[1],h=Object(a.useState)(!1),p=Object(s.a)(h,2),g=p[0],v=p[1],x=Object(a.useState)({startX:null,startY:null,currentX:null,currentY:null}),y=Object(s.a)(x,2),m=y[0],S=y[1];return Object(n.jsx)("div",{onMouseDown:function(t){if(c[t.target.dataset.figure]){var e=t.clientX,n=t.clientY;v(!0),f(t.target),S(Object(b.a)(Object(b.a)({},m),{},{startX:e,startY:n}))}},onMouseMove:g?function(t){var e=t.clientX,c=t.clientY;l.style.transform="translate(".concat(e-m.startX,"px, ").concat(c-m.startY,"px)")}:void 0,onMouseUp:g?function(t){var e,n=t.clientX,a=t.clientY;v(!1);var i=O(n,a,"cell");r(j(Object(b.a)(Object(b.a)({},c),{},(e={},Object(d.a)(e,l.dataset.figure,null),Object(d.a)(e,i.dataset.cell,{content:l.dataset.figure}),e))))}:void 0,onTouchStart:function(t){t.preventDefault();var e=t.target,n=t.changedTouches;if(c[e.dataset.figure]){var a=n[0],r=a.clientX,i=a.clientY;v(!0),f(e),S(Object(b.a)(Object(b.a)({},m),{},{startX:r,startY:i}))}},onTouchMove:g?function(t){t.preventDefault();var e=t.changedTouches[0],c=e.clientY,n=e.clientX;l.style.transform="translate(".concat(n-m.startX,"px, ").concat(c-m.startY,"px)")}:void 0,onTouchEnd:g?function(t){var e;t.preventDefault();var n=t.changedTouches[0],a=n.clientY,i=n.clientX;v(!1);var o=O(i,a,"cell");r(j(Object(b.a)(Object(b.a)({},c),{},(e={},Object(d.a)(e,l.dataset.figure,null),Object(d.a)(e,o.dataset.cell,{content:l.dataset.figure}),e))))}:void 0,children:e})},v=function(t){var e=t.index,c=t.size,r=t.children,i=(Object(u.c)((function(t){return t.chessboardReducer})).figuresData,Object(u.b)(),Object(a.useRef)(null));return Object(a.useEffect)((function(){if(i){({})[i.current.id]=!0}}),[]),Object(n.jsx)("div",Object(b.a)(Object(b.a)({ref:i},{"data-figure":"".concat(e)}),{},{id:"figure-".concat(e),style:{width:c,height:c,background:"red",position:"absolute",top:"10%",left:"10%",zIndex:2},children:r}))},x=function(t){var e=t.size,c=t.index,a=t.children;return Object(n.jsx)("div",Object(b.a)(Object(b.a)({},{"data-cell":"".concat(c)}),{},{style:{width:e,height:e,border:"1px solid red",background:"black",position:"relative"},children:a}))},y=function(t){var e=t.size,c=void 0===e?440:e,r=t.fen,i=void 0===r?"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1":r,o=Object(u.c)((function(t){return t.chessboardReducer})).figuresData,d=Object(u.b)();return Object(a.useEffect)((function(){console.log("\u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e \u0431\u043b\u044f\u0434\u044c"),o||d(j(function(){for(var t=i.split(" ")[0].split("/"),e={},c=0;c<8;c+=1)for(var n=0;n<8;n+=1)l[t[c][n]]?e["".concat(String.fromCharCode(65+c)).concat(n+1)]={content:"".concat(String.fromCharCode(65+c)).concat(n+1)}:e["".concat(String.fromCharCode(65+c)).concat(n+1)]=null;return e}()))}),[]),Object(n.jsx)(g,{children:Object(n.jsx)("div",{style:{width:c,height:c,border:"1px solid black",display:"grid",gridTemplateColumns:"".concat(c/8,"px ").concat(c/8,"px ").concat(c/8,"px ").concat(c/8,"px ").concat(c/8,"px ").concat(c/8,"px ").concat(c/8,"px ").concat(c/8,"px")},className:"Chessboard",children:o?Object.entries(o).map((function(t){var e=Object(s.a)(t,2),a=e[0],r=e[1];return Object(n.jsx)(x,{index:a,children:r?Object(n.jsx)(v,{index:a,size:c/14,children:r.content}):void 0})})):null})})},m=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,27)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;c(t),n(t),a(t),r(t),i(t)}))},S=c(6),P=Object(S.b)({chessboardReducer:p}),T=Object(S.c)(P);o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(u.a,{store:T,children:Object(n.jsx)(y,{})})}),document.getElementById("root")),m()}},[[26,1,2]]]);
//# sourceMappingURL=main.0de0936c.chunk.js.map