(this["webpackJsonpchesstery-graph-lib-chess"]=this["webpackJsonpchesstery-graph-lib-chess"]||[]).push([[0],{17:function(t,e,c){},24:function(t,e,c){},25:function(t,e,c){},26:function(t,e,c){"use strict";c.r(e);var a=c(1),n=c(0),o=c.n(n),r=c(6),s=c.n(r),i=(c(17),c(4)),l=c(3),u=(c(24),{wS:!0,bS:!0,K:!0,Q:!0,R:!0,B:!0,N:!0,P:!0,k:!0,q:!0,r:!0,b:!0,n:!0,p:!0}),d=["A1","A2","A3","A4","A5","A6","A7","A8","B1","B2","B3","B4","B5","B6","B7","B8","C1","C2","C3","C4","C5","C6","C7","C8","D1","D2","D3","D4","D5","D6","D7","D8","E1","E2","E3","E4","E5","E6","E7","E8","F1","F2","F3","F4","F5","F6","F7","F8","G1","G2","G3","G4","G5","G6","G7","G8","H1","H2","H3","H4","H5","H6","H7","H8"],g=c(2),b=function(t,e,c){var a=null,n=[],o=[];return function r(){if(a=document.elementFromPoint(t,e))return a.dataset[c]||"HTML"===a.tagName?(0!==n.length&&n.forEach((function(t,e){return t.style.display=o[e]})),a):(o.push(a.style.display),a.style.display="none",n.push(a),r())}()},f=function(t){var e=t.children,c=t.onDrop,o=Object(l.c)((function(t){return t.chessboardReducer})).figuresData,r=(Object(l.b)(),Object(n.useState)(null)),s=Object(i.a)(r,2),u=(s[0],s[1],Object(n.useState)({x:null,y:null})),d=Object(i.a)(u,2),f=d[0],h=d[1],p=Object(n.useState)(null),j=Object(i.a)(p,2),v=(j[0],j[1],Object(n.useState)(null)),O=Object(i.a)(v,2),m=O[0],x=O[1],y=Object(n.useState)(!1),S=Object(i.a)(y,2),B=S[0],k=S[1],D=Object(n.useState)({startX:null,startY:null,currentX:null,currentY:null}),P=Object(i.a)(D,2),C=P[0],E=P[1],F=function(t){var e=getComputedStyle(t).getPropertyValue("transform").split(", "),c=e[e.length-1];c=c.slice(0,c.length-1);var a=e[e.length-2];return{x:Number(a),y:Number(c)}};return Object(a.jsx)("div",{onMouseDown:function(t){if(o[t.target.dataset.figure]){var e=t.clientX,c=t.clientY;k(!0),x(t.target);var a=F(t.target);h(a),E(Object(g.a)(Object(g.a)({},C),{},{startX:e,startY:c})),t.target.style.transform="translate(".concat(e-50,"px, ").concat(c-50,"px)")}},onMouseMove:B?function(t){var e=t.clientX,c=t.clientY,a=f.x,n=f.y;a-=f.x-e,n-=f.y-c,console.log("translate(".concat(a,"px, ").concat(n,"px)")),console.log(e,c),m.style.transform="translate(".concat(e-50,"px, ").concat(c-50,"px)")}:void 0,onMouseUp:B?function(t){k(!1),t.target.style.transform="";var e=t.clientX,a=t.clientY,n=b(e,a,"cell");console.log(n),c({source:m.dataset.figure,target:n.dataset.cell})&&(console.log(m),m.className="figure figure-".concat(n.dataset.cell),console.log(t)),m.style.transform=""}:void 0,onTouchStart:function(t){var e=F(t.target);h(e);var c=t.target,a=t.changedTouches;if(o[c.dataset.figure]){var n=a[0],r=n.clientX,s=n.clientY;k(!0),x(c),E(Object(g.a)(Object(g.a)({},C),{},{startX:r,startY:s})),t.target.style.transform="translate(".concat(r-50,"px, ").concat(s-50,"px)")}},onTouchMove:B?function(t){console.log(t);var e=t.changedTouches[0],c=e.clientY,a=e.clientX;f.x,f.y;m.style.transform="translate(".concat(a-50,"px, ").concat(c-50,"px)")}:void 0,onTouchEnd:B?function(t){k(!1),t.target.style.transform="";var e=t.changedTouches[0],a=e.clientY,n=e.clientX,o=b(n,a,"cell");console.log(o),c({source:m.dataset.figure,target:o.dataset.cell})&&(console.log(m),m.className="figure figure-".concat(o.dataset.cell),console.log(t))}:void 0,children:e})},h=(c(25),function(t){var e=t.index,c=t.size,o=t.children,r=t.imagePath,s=(Object(l.c)((function(t){return t.chessboardReducer})).figuresData,Object(l.b)(),Object(n.useRef)(null));return Object(a.jsx)("div",Object(g.a)(Object(g.a)({className:"figure figure-".concat(e),ref:s},{"data-figure":"".concat(e)}),{},{id:"figure-".concat(e),style:{background:"url(".concat(r,") no-repeat"),backgroundSize:"90% 90%",top:0,left:0,width:c,height:c,position:"absolute",zIndex:100,touchAction:"none"},children:o}))}),p=function(t){var e=t.size,c=t.index,n=t.children,o=t.squareStyle;return Object(a.jsx)("div",Object(g.a)(Object(g.a)({},{"data-cell":"".concat(c)}),{},{style:Object(g.a)({width:e,height:e},o),children:n}))},j=c.p+"static/media/KingWhite.411e1418.svg",v=c.p+"static/media/QueenWhite.337c2a2c.svg",O=c.p+"static/media/RookWhite.60061bbb.svg",m=c.p+"static/media/BishopWhite.f416d383.svg",x=c.p+"static/media/KnightWhite.66169663.svg",y=c.p+"static/media/PawnWhite.b7bd895a.svg",S=c.p+"static/media/PawnBlack.b0577cbe.svg",B=c.p+"static/media/KingBlack.3bb79907.svg",k=c.p+"static/media/QueenBlack.ad9b7855.svg",D=c.p+"static/media/RookBlack.aed24261.svg",P=c.p+"static/media/BishopBlack.376719d4.svg",C=c.p+"static/media/KnightBlack.344f8f65.svg",E="chessboardReducer/SET_FUGRES_DATA",F={figuresData:null},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:return Object(g.a)(Object(g.a)({},t),{},{figuresData:e.payload});default:return t}},w={K:j,Q:v,R:O,B:m,N:x,P:y,k:B,q:k,r:D,b:P,n:C,p:S},T=function(t){var e=t.imagePaths,c=void 0===e?w:e,o=t.size,r=void 0===o?600:o,s=t.fen,g=void 0===s?"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1":s,b=t.lightSquareStyle,j=void 0===b?{backgroundColor:"white"}:b,v=t.blackSquareStyle,O=void 0===v?{backgroundColor:"black"}:v,m=t.onDrop,x=void 0===m?function(t){return console.log(t),!0}:m,y=Object(l.c)((function(t){return t.chessboardReducer})).figuresData,S=Object(l.b)(),B=Object(n.useState)(g),k=Object(i.a)(B,2),D=k[0],P=(k[1],function(t){for(var e=t.split(" ")[0].split("/"),a={},n=0;n<8;n+=1)for(var o=0;o<8;o+=1)u[e[n][o]]&&(a["".concat(String.fromCharCode(65+n)).concat(o+1)]={image:c[e[n][o]]});return console.log(a),a});return Object(n.useEffect)((function(){var t;console.log(P(D)),y||S((t=P(D),{type:E,payload:t}))}),[D]),Object(n.useEffect)((function(){}),[]),Object(a.jsx)(f,{onDrop:x,children:Object(a.jsxs)("div",{style:{width:r,height:r,border:"1px solid black",display:"grid",gridTemplateColumns:"".concat(r/8,"px ").concat(r/8,"px ").concat(r/8,"px ").concat(r/8,"px ").concat(r/8,"px ").concat(r/8,"px ").concat(r/8,"px ").concat(r/8,"px")},className:"Chessboard",children:[function(){for(var t=[],e=!1,c=0;c<64;c+=1)c%8!==0&&(e=!e),t.push(Object(a.jsx)(p,{index:d[c],squareStyle:e?j:O}));return t}(),y?Object(a.jsx)(a.Fragment,{children:function(){for(var t=[],e=Object.entries(y),c=0;c<e.length;c+=1){var n=Object(i.a)(e[c],2),o=n[0],s=n[1];t.push(Object(a.jsx)(h,{imagePath:s.image,index:o,size:r/8}))}return t}()}):null]})})},A=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,27)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,o=e.getLCP,r=e.getTTFB;c(t),a(t),n(t),o(t),r(t)}))},N=c(5),X=Object(N.b)({chessboardReducer:R}),Y=Object(N.c)(X);s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(l.a,{store:Y,children:Object(a.jsx)(T,{})})}),document.getElementById("root")),A()}},[[26,1,2]]]);
//# sourceMappingURL=main.77603244.chunk.js.map